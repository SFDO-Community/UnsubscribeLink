minimum_cumulusci_version: '3.86.1'
project:
    name: Unsubscribe-Link
    package:
        name: Unsubscribe-Link
        namespace: UnsubscribeLnk
        api_version: '60.0'
    git:
        default_branch: 'main'
    source_format: sfdx

tasks:
    robot:
        options:
            suites: robot/Unsubscribe-Link/tests
            options:
                outputdir: robot/Unsubscribe-Link/results

    robot_testdoc:
        options:
            path: robot/Unsubscribe-Link/tests
            output: robot/Unsubscribe-Link/doc/Unsubscribe-Link_tests.html

    run_tests:
        options:
            required_org_code_coverage_percent: 75

    install_v3:
        description: install the older SF Labs version 3 of Unsubscribe Link. Useful for upgrade testing
        class_path: cumulusci.tasks.command.Command
        options:
            command: sf package install --package 04t4W000002kcU0QAI

    install_v4-prerelease:
        description: install the pre-release packaged version of the Commons version of Unsubscribe Link. Used in the March 2025 sprint, but should be deprecated after the package is released in favor of default CCI tasks.
        class_path: cumulusci.tasks.command.Command
        options:
            command: sf package install --package 04taj000000471JAAQ

    labs_upgrade_package:
        description: Installs metadata used for a scripted migration from the Salesforce Labs package to the Commons managed package.
        class_path: cumulusci.tasks.salesforce.Deploy
        options:
            path: unpackaged/labs-upgrade
